<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Subjectwise Grade Calculator</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
body {
  font-family: 'Inter', sans-serif;
  background: #000 url('book.jpg') center/cover fixed no-repeat;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
}
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  z-index: -1;
}

#mainContainer, #developerBox, #feedbackBox {
  will-change: transform, opacity;
}

#developerBox, #feedbackBox {
  opacity: 0;
  transform: translateY(40px) scale(0.95);
  transition: opacity 0.25s ease-out, transform 0.3s ease-out;
}

#developerBox.active, #feedbackBox.active {
  opacity: 1;
  transform: translateY(0) scale(1);
}

input[type="number"], input[type="text"], input[type="email"] {
  -moz-appearance: textfield;
}
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input#mark { color: white; }

.star {
  cursor: pointer;
  font-size: 1.8rem;
  color: #888;
  transition: color 0.2s;
}
.star.selected,
.star.hovered {
  color: #facc15;
}

#message { resize: none; }

#thankYouMsg {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #059669;
  color: white;
  padding: 12px 20px;
  border-radius: 12px;
  font-weight: 600;
  display: none;
  z-index: 50;
}
#thankYouMsg.show { display: block; }

footer { color: white; opacity: 0.8; }

/* Developer photo protection */
.developer-protect, .developer-protect * {
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
  touch-action: none !important;
  -webkit-touch-callout: none !important;
  pointer-events: none;
}

#screenshotWarning {
  pointer-events: none;
}
</style>
</head>
<body class="min-h-screen flex flex-col justify-center items-center p-4 select-none">

<!-- Main Grade Calculator -->
<div id="mainContainer"
     class="w-full max-w-sm bg-gray-900 border border-gray-800 rounded-xl p-6 shadow-2xl transition-transform duration-200 ease-out hover:shadow-cyan-500/30">
  <h1 class="text-3xl font-extrabold text-white mb-2 tracking-tight">Subject Grade</h1>
  <p class="text-sm text-gray-400 mb-6">
    Enter your mark (0–100) to check your result based on BD grading system.
  </p>

  <input type="number" id="mark" placeholder="Enter mark here"
    class="w-full p-3 mb-6 text-center text-xl font-bold bg-gray-800 border border-gray-700 rounded-lg focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-100 shadow-inner"
    min="0" max="100" onkeydown="if(event.key === 'Enter') calculateGrade()" />

  <button onclick="calculateGrade()"
    class="w-full bg-gradient-to-r from-pink-500 to-rose-500 text-white font-semibold py-3 rounded-xl shadow-lg hover:from-pink-600 hover:to-rose-600 transition-transform duration-150 active:scale-95 focus:outline-none focus:ring-4 focus:ring-rose-500/40">
    Calculate Grade
  </button>

  <div id="result"
    class="result mt-6 text-2xl font-extrabold text-white min-h-[36px] flex items-center justify-center">
  </div>

  <button onclick="showDeveloper()"
    class="mt-4 w-full text-sm text-gray-400 hover:text-cyan-400 transition-colors duration-100">
    Developer Details
  </button>

  <button onclick="showFeedback()"
    class="mt-2 w-full text-sm text-gray-400 hover:text-cyan-400 transition-colors duration-100">
    Give Feedback
  </button>
</div>

<!-- Developer Popup -->
<div id="developerOverlay"
  class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden z-30 flex justify-center items-center">
  <div id="developerBox"
    class="bg-gray-900 border border-cyan-500/30 rounded-2xl p-8 w-full max-w-xs text-center shadow-2xl shadow-cyan-500/20 relative">
    
    <!-- Protected Image Container -->
    <div class="relative w-32 h-32 mx-auto mb-4 developer-protect">
      <img src="dhrubo.jpg" alt="Developer Photo"
           class="w-full h-full rounded-full object-cover shadow-xl">
      <div class="absolute inset-0 rounded-full" style="background:transparent;"></div>
      <div id="screenshotWarning" 
           class="absolute inset-0 flex items-center justify-center bg-black/70 text-white text-xs font-semibold rounded-full opacity-0 transition-opacity duration-200">
        Screenshot And Saving Photo Disabled ⚠️
      </div>
    </div>

    <h2 class="text-2xl font-bold text-white mb-2">Qazi Sajidul Hasan Dhrubo</h2>
    <p class="text-gray-400 text-sm leading-snug">
      Haziganj Degree College<br>Haziganj, Chandpur, Bangladesh
    </p>

    <div class="flex justify-center space-x-6 mt-6 mb-8">
      <a href="https://www.facebook.com/dhruboooooooo" target="_blank"
        class="text-gray-400 hover:text-blue-500 transition-transform duration-100 hover:scale-110">
        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd"
            d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h3.298l-.517 2.987h-2.78v7.106C18.343 21.128 22 16.991 22 12z"
            clip-rule="evenodd" />
        </svg>
      </a>

      <a href="https://www.instagram.com/dhruvstaar_/" target="_blank"
        class="text-gray-400 hover:text-pink-500 transition-transform duration-100 hover:scale-110">
        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
          <path fill-rule="evenodd"
            d="M12.315 2c2.43 0 2.715.011 3.681.05 1.054.043 1.794.228 2.458.489a4.897 4.897 0 0 1 1.772 1.153 4.908 4.908 0 0 1 1.153 1.772c.261.664.446 1.404.488 2.458.038.966.049 1.251.049 3.68s-.011 2.715-.05 3.681c-.043 1.054-.228 1.794-.488 2.458a4.887 4.887 0 0 1-1.153 1.772 4.908 4.908 0 0 1-1.772 1.153c-.664.261-1.404.446-2.458.488-.966.039-1.251.049-3.681.049s-2.715-.01-3.681-.049c-1.054-.042-1.794-.227-2.458-.488a4.896 4.896 0 0 1-1.772-1.153 4.908 4.908 0 0 1-1.153-1.772c-.261-.664-.446-1.404-.488-2.458C2.011 14.715 2 14.43 2 12s.011-2.715.05-3.681c.043-1.054.228-1.794.488-2.458A4.896 4.896 0 0 1 3.68 3.896a4.907 4.907 0 0 1 1.772-1.153c.664-.261 1.404-.446 2.458-.488C9.585 2.011 9.87 2 12.315 2zM12 4.34c-4.49 0-8.15 3.66-8.15 8.15s3.66 8.15 8.15 8.15 8.15-3.66 8.15-8.15-3.66-8.15-8.15-8.15zm6.5.992a1.324 1.324 0 1 0 0 2.648 1.324 1.324 0 0 0 0-2.648zM12 8.583a3.417 3.417 0 1 0 0 6.834 3.417 3.417 0 0 0 0-6.834zM12 10a2 2 0 1 1 0 4 2 2 0 0 1 0-4z"
            clip-rule="evenodd" />
        </svg>
      </a>
    </div>

    <button onclick="closeDeveloper()"
      class="w-full bg-rose-600 text-white font-semibold py-3 rounded-xl shadow-lg hover:bg-rose-700 transition-transform duration-100 active:scale-95">
      Close Details
    </button>
  </div>
</div>

<!-- Feedback Popup -->
<div id="feedbackOverlay" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden z-40 flex justify-center items-center">
  <div id="feedbackBox" class="bg-gray-900 border border-cyan-500/30 rounded-2xl p-6 w-full max-w-md text-center shadow-2xl shadow-cyan-500/20">
    <h2 class="text-2xl font-bold text-white mb-4">Rate & Send Feedback</h2>
    <form id="feedbackForm" action="https://formspree.io/f/mpwygdkw" method="POST">
      <input type="text" name="name" placeholder="Your Name" required
        class="w-full p-3 mb-2 bg-gray-800 text-white rounded-lg border border-gray-700 focus:ring-cyan-500 focus:border-cyan-500" />
      <input type="email" name="email" placeholder="Your Email" required
        class="w-full p-3 mb-2 bg-gray-800 text-white rounded-lg border border-gray-700 focus:ring-cyan-500 focus:border-cyan-500" />
      
      <div class="flex justify-center mb-4">
        <span class="star" data-value="1">&#9733;</span>
        <span class="star" data-value="2">&#9733;</span>
        <span class="star" data-value="3">&#9733;</span>
        <span class="star" data-value="4">&#9733;</span>
        <span class="star" data-value="5">&#9733;</span>
      </div>
      <input type="hidden" name="starRating" id="starRating" value="0" />

      <textarea id="message" name="message" rows="4" maxlength="600" placeholder="Write your feedback (max 100 words)"
        class="w-full p-3 mb-4 bg-gray-800 text-white rounded-lg border border-gray-700 focus:ring-cyan-500 focus:border-cyan-500"></textarea>

      <button type="submit"
        class="w-full bg-cyan-500 hover:bg-cyan-600 text-white font-semibold py-3 rounded-xl shadow-lg transition-transform duration-100 active:scale-95 mb-2">
        Send Feedback
      </button>
      <button type="button" onclick="closeFeedback()"
        class="w-full bg-rose-600 hover:bg-rose-700 text-white font-semibold py-3 rounded-xl shadow-lg transition-transform duration-100 active:scale-95">
        Close
      </button>
    </form>
    <!-- Email status message will appear here -->
    <div id="emailStatus"></div>
  </div>
</div>

<!-- Thank You Message -->
<div id="thankYouMsg"></div>

<!-- Footer -->
<footer class="mt-8 text-center text-xs">
© 2025 GPA Calculator BD | Made by Qazi Sajidul Hasan Dhrubo
</footer>

<script>
// Preload images
['book.jpg','dhrubo.jpg'].forEach(src=>{const img=new Image();img.src=src;});

// Grade Calculator
function calculateGrade() {
  const a=parseInt(document.getElementById("mark").value.trim());
  const resEl=document.getElementById("result");
  let result="", color="text-white";
  if(isNaN(a)||a<0||a>100) result="Invalid Mark ❌";
  else if(a>=80){result="Grade: A+ 🏆 (GPA 5.00)"; color="text-yellow-400";}
  else if(a>=70){result="Grade: A (GPA 4.00)";}
  else if(a>=60){result="Grade: A- (GPA 3.50)";}
  else if(a>=50){result="Grade: B (GPA 3.00)";}
  else if(a>=40){result="Grade: C (GPA 2.00)";}
  else if(a>=33){result="Grade: D (GPA 1.00)";}
  else{result="Grade: F 💀 (GPA 0.00)"; color="text-red-500";}
  resEl.className=`result mt-6 text-2xl font-extrabold ${color} min-h-[36px] flex items-center justify-center`;
  resEl.innerHTML=result;
}

// Developer Popup
function showDeveloper(){const overlay=document.getElementById("developerOverlay"),box=document.getElementById("developerBox");overlay.classList.remove("hidden");requestAnimationFrame(()=>box.classList.add("active"));}
function closeDeveloper(){const overlay=document.getElementById("developerOverlay"),box=document.getElementById("developerBox");box.classList.remove("active");setTimeout(()=>overlay.classList.add("hidden"),250);}

// Feedback Popup
const feedbackOverlay=document.getElementById('feedbackOverlay');
const feedbackBox=document.getElementById('feedbackBox');
function showFeedback(){feedbackOverlay.classList.remove('hidden');requestAnimationFrame(()=>feedbackBox.classList.add('active'));}
function closeFeedback(){feedbackBox.classList.remove('active');setTimeout(()=>feedbackOverlay.classList.add('hidden'),250);}

// Star rating with deselect
const stars=document.querySelectorAll('.star');
const starInput=document.getElementById('starRating');
stars.forEach(star=>{
  star.addEventListener('mouseover',()=>{stars.forEach(s=>s.classList.remove('hovered'));for(let i=0;i<star.dataset.value;i++) stars[i].classList.add('hovered');});
  star.addEventListener('mouseout',()=>stars.forEach(s=>s.classList.remove('hovered')));
  star.addEventListener('click',()=>{
    if(starInput.value==star.dataset.value){
      starInput.value=0;
      stars.forEach(s=>s.classList.remove('selected'));
    }else{
      starInput.value=star.dataset.value;
      stars.forEach(s=>s.classList.remove('selected'));
      for(let i=0;i<star.dataset.value;i++) stars[i].classList.add('selected');
    }
  });
});

// Feedback Form Submission with Abstract API Email Verification
const form=document.getElementById('feedbackForm');
const thankYouMsg=document.getElementById('thankYouMsg');
const emailInputField = form.querySelector('input[name="email"]');
const emailStatusDiv = document.createElement('div');
emailStatusDiv.style.marginTop = '5px';
emailStatusDiv.style.fontSize = '14px';
emailStatusDiv.style.color = 'white';
emailInputField.insertAdjacentElement('afterend', emailStatusDiv);

let emailValid = false;

emailInputField.addEventListener('blur', async () => {
  const email = emailInputField.value.trim();
  if(!email) return;
  emailStatusDiv.textContent = '🔍 Checking email...';
  emailStatusDiv.style.color = 'white';
  emailValid = false;

  try {
    const res = await fetch(`https://emailvalidation.abstractapi.com/v1/?api_key=f118b4816db5453ab7af41c28766f738&email=${email}`);
    const data = await res.json();
    if(data.deliverability === "DELIVERABLE"){
      emailStatusDiv.textContent = "✅ Valid and deliverable email!";
      emailStatusDiv.style.color = "lime";
      emailValid = true;
    } else {
      emailStatusDiv.textContent = "❌ Invalid or undeliverable email.";
      emailStatusDiv.style.color = "red";
      emailValid = false;
    }
  } catch(err){
    emailStatusDiv.textContent = "⚠️ Could not verify email. Try again.";
    emailStatusDiv.style.color = "orange";
    emailValid = false;
  }
});

form.addEventListener('submit', async e=>{
  if(!emailValid){
    e.preventDefault();
    alert("Please enter a valid email before submitting!");
    return;
  }
  if(starInput.value==0){
    e.preventDefault();
    alert("Please select a star rating before sending feedback!");
    return;
  }

  e.preventDefault();
  const formData=new FormData(form);
  try{
    const res=await fetch(form.action,{method:'POST',body:formData,headers:{'Accept':'application/json'}});
    if(res.ok){
      const name=formData.get('name')||'there';
      form.reset();
      starInput.value=0;
      stars.forEach(s=>s.classList.remove('selected'));
      emailStatusDiv.textContent = '';
      closeFeedback();
      thankYouMsg.textContent=`Thank you for your feedback! We will get back to you, ${name}!`;
      thankYouMsg.classList.add('show');
      setTimeout(()=>thankYouMsg.classList.remove('show'),5000);
    } else { alert('Oops! Could not send feedback.'); }
  } catch(err){ alert('Error sending feedback'); }
});

// Prevent right-click, drag, and PrintScreen
document.addEventListener('contextmenu', e=>e.preventDefault());
document.addEventListener('keydown', e=>{
  if(e.key === "PrintScreen"){
    const devImg = document.querySelector("#developerBox img");
    devImg.style.filter="brightness(0)";
    setTimeout(()=>{devImg.style.filter="brightness(1)";}, 1000);
  }
});

// Mobile long-press overlay warning
const devProtect = document.querySelector(".developer-protect");
const screenshotWarning = document.getElementById("screenshotWarning");
devProtect.addEventListener("touchstart", e => {
  screenshotWarning.style.opacity = "1";
  setTimeout(() => { screenshotWarning.style.opacity = "0"; }, 1200);
});
</script>
</body>
</html>
